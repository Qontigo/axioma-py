<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started with axiomapy &mdash; axiomapy 0+untagged.199.g866c3ae.dirty documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Axiomasessions" href="with_sessions.html" />
    <link rel="prev" title="Examples" href="../examples2.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            axiomapy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Examples and Use Cases:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../examples2.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../examples2.html#instructions-for-running-examples">Instructions for running examples</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Imports">Imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Logging-in">Logging in</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Find-portfolios-using-oData-filters">Find portfolios using oData filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Create-a-portfolio-and-check-for-a-portfolio">Create a portfolio and check for a portfolio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Create-some-positions">Create some positions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Search-for-views">Search for views</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Run-a-risk-analysis">Run a risk analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Clean-up">Clean up</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Logging-in-for-Bulk-Session">Logging in for Bulk Session</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="with_sessions.html">Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="with_axiomaapi.html">AxiomaAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="with_entitybase.html">Developer Base Class Guide</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Packages:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sessions.html">Sessions Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../axiomapyapi.html">AxiomaAPI Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../odatafilterhelpers.html">oDataFilterHelpers</a></li>
</ul>
<p class="caption"><span class="caption-text">Endpoints:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../endpoints.html">Axiomarisk endpoints covered by axioma-py</a></li>
</ul>
<p class="caption"><span class="caption-text">Other:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">axiomapy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../examples2.html">Examples</a></li>
      <li class="breadcrumb-item active">Getting Started with axiomapy</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/nb_examples/getting_started.ipynb" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Getting-Started-with-axiomapy">
<h1>Getting Started with axiomapy<a class="headerlink" href="#Getting-Started-with-axiomapy" title="Permalink to this headline">¶</a></h1>
<p>While there are various samples that go into further details on specific topics the following guide is intended as a starting point to explore a few basic operations and gain some familiarity with the package.</p>
<div class="section" id="Imports">
<h2>Imports<a class="headerlink" href="#Imports" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Logging">
<h3>Logging<a class="headerlink" href="#Logging" title="Permalink to this headline">¶</a></h3>
<p>The standard logging library is used to log from within the package. In order to see the logging statements you must add at least one handler. In this case we will just log to the stdout. The level will be info. The following statement sets the default config for the logging.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> </span><span class="si">%(levelname)-8s</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Other-common-imports">
<h3>Other common imports<a class="headerlink" href="#Other-common-imports" title="Permalink to this headline">¶</a></h3>
<p>While you may leverage many packages in your projects the following are used here and in the examples.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Importing-from-axiomapy">
<h3>Importing from axiomapy<a class="headerlink" href="#Importing-from-axiomapy" title="Permalink to this headline">¶</a></h3>
<p>The following shows some of the most common imports from axiomapy, however, not all will be explicitly needed.</p>
<p>At the root of the package there are some core class but always required is the Session manager AxiomaSession. The AxiomaSession will handle connecting to the Axioma API and any http requests.</p>
<p>The package is organised much like the rest api.</p>
<p>In general the necessary enumerations and associated datamodel classes are accessed from the ‘parent’ package (e.g. Enums can be accessed from axiomapy.axiomaapi.enums)</p>
<p>A side note on collections: Most server resources are returned as a set of items based on the oData filters. Mapping (when their is a unique key) or Sequence classes are available to represent these sets. As an example there is Portfolio and Portfolios. A list can be passed instead of a mapping/sequence class and a mapping/sequence where relevant. The advantage of the mapping classes is that they have methods to help manage the set of underlying instances. However, they all offer a to_list() if
you prefer to work with a list if the items.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">axiomapy</span> <span class="kn">import</span> <span class="n">AxiomaSession</span>
</pre></div>
</div>
</div>
<p>Portfolio related imports</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">axiomapy.axiomaapi</span> <span class="kn">import</span> <span class="n">PortfolioGroupsAPI</span><span class="p">,</span> <span class="n">PortfoliosAPI</span>
</pre></div>
</div>
</div>
<p>Imports related to running risk analyses on a portfolio or collection of positions</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">axiomapy.axiomaapi</span> <span class="kn">import</span> <span class="n">AnalysisDefinitionAPI</span><span class="p">,</span> <span class="n">RiskModelDefinitionsAPI</span><span class="p">,</span> <span class="n">AnalysesRiskAPI</span>
</pre></div>
</div>
</div>
<p>Other Imports related to getting templates and entities</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">axiomapy.axiomaapi</span> <span class="kn">import</span> <span class="n">MetaDataAPI</span><span class="p">,</span> <span class="n">TemplatesAPI</span><span class="p">,</span> <span class="n">EntitiesAPI</span>
<span class="kn">from</span> <span class="nn">axiomapy.odatahelpers</span> <span class="kn">import</span> <span class="n">oDataFilterHelper</span> <span class="k">as</span> <span class="n">od</span>
<span class="kn">from</span> <span class="nn">axiomapy.axiomaapi</span> <span class="kn">import</span> <span class="n">enums</span>
<span class="kn">from</span> <span class="nn">axiomapy</span> <span class="kn">import</span> <span class="n">axiomaexceptions</span>
<span class="kn">from</span> <span class="nn">axiomapy.session</span> <span class="kn">import</span> <span class="n">APIType</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Logging-in">
<h2>Logging in<a class="headerlink" href="#Logging-in" title="Permalink to this headline">¶</a></h2>
<p>A session is created, authenticated and set as the current session used for any http requests made via the package.</p>
<p>Update the credentials and run the command below:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># For testing load up some credentials</span>
<span class="kn">from</span> <span class="nn">load_credentials</span> <span class="kn">import</span> <span class="n">get_user</span>
<span class="n">user1</span> <span class="o">=</span>  <span class="n">get_user</span><span class="p">(</span><span class="s1">&#39;user1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace the user1[&#39;xx&#39;] with your credentials</span>
<span class="n">AxiomaSession</span><span class="o">.</span><span class="n">use_session</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
    <span class="n">password</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span>
    <span class="n">domain</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;domain&#39;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>The users can still pass client id, if they wish to use a specific client id</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace the user1[&#39;xx&#39;] with your credentials</span>
<span class="n">AxiomaSession</span><span class="o">.</span><span class="n">use_session</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
    <span class="n">password</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span>
    <span class="n">domain</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;domain&#39;</span><span class="p">],</span>
    <span class="n">client_id</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;client_id&#39;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Find-portfolios-using-oData-filters">
<h2>Find portfolios using oData filters<a class="headerlink" href="#Find-portfolios-using-oData-filters" title="Permalink to this headline">¶</a></h2>
<p>Return the set of portfolios into a mapping collection (keyed on portfolio name). OData parameters can be used to control the set of portfolios returned. There are some helpers to assist with basic filter syntax.</p>
<p>Here the first 5 portfolios are returned that have: * long_name contains “US” and does not start with “Test” and, * the latest position date field is null (i.e. no positions are loaded) and, * default currency in the set “USD”, “GBP” or default data partition is AxiomaUS</p>
<p>The helper will also camelize field names by default.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a set of filters using the helpers to</span>
<span class="n">filters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">od</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;long_name&quot;</span><span class="p">,</span> <span class="s2">&quot;US&quot;</span><span class="p">),</span>
    <span class="s1">&#39;and not&#39;</span><span class="p">,</span>
    <span class="n">od</span><span class="o">.</span><span class="n">starts_with</span><span class="p">(</span><span class="s2">&quot;longName&quot;</span><span class="p">,</span> <span class="s2">&quot;Test&quot;</span><span class="p">),</span>
    <span class="s1">&#39;and&#39;</span><span class="p">,</span>
    <span class="n">od</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;latestPositionDate&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="s1">&#39;and (&#39;</span><span class="p">,</span>
    <span class="n">od</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="s2">&quot;default_currency&quot;</span><span class="p">,</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span> <span class="s2">&quot;GBP&quot;</span><span class="p">),</span>
    <span class="s1">&#39;or&#39;</span><span class="p">,</span>
    <span class="n">od</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;defaultDataPartition&quot;</span><span class="p">,</span> <span class="s2">&quot;AxiomaUS&quot;</span><span class="p">),</span>
    <span class="s2">&quot;)&quot;</span>
<span class="p">]</span>

<span class="n">filter_</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">filter_</span><span class="p">)</span>

<span class="n">ptfs</span> <span class="o">=</span> <span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">get_portfolios</span><span class="p">(</span><span class="n">filter_results</span><span class="o">=</span><span class="n">filter_</span> <span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># show the names of the portfolios found</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ptfs</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Create-a-portfolio-and-check-for-a-portfolio">
<h2>Create a portfolio and check for a portfolio<a class="headerlink" href="#Create-a-portfolio-and-check-for-a-portfolio" title="Permalink to this headline">¶</a></h2>
<p>Create a portfolio if it doesnt exist already</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">test_portfolio</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Test_Portfolio&quot;</span><span class="p">,</span>
    <span class="s2">&quot;longName&quot;</span><span class="p">:</span> <span class="s2">&quot;My Test Portfolio&quot;</span><span class="p">,</span>
    <span class="s2">&quot;defaultCurrency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">post_portfolio</span><span class="p">(</span><span class="n">portfolio</span><span class="o">=</span><span class="n">test_portfolio</span><span class="p">)</span>
    <span class="n">pId</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="k">except</span> <span class="p">(</span><span class="n">axiomaexceptions</span><span class="o">.</span><span class="n">AxiomaRequestError</span><span class="p">,</span> <span class="n">axiomaexceptions</span><span class="o">.</span><span class="n">AxiomaRequestValidationError</span><span class="p">,</span> <span class="n">axiomaexceptions</span><span class="o">.</span><span class="n">AxiomaRequestStatusError</span><span class="p">):</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">od</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;Test_Portfolio&quot;</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="n">filter_</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
    <span class="n">ptfs</span> <span class="o">=</span> <span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">get_portfolios</span><span class="p">(</span><span class="n">filter_results</span><span class="o">=</span><span class="n">filter_</span><span class="p">)</span>
    <span class="n">pId</span> <span class="o">=</span> <span class="n">ptfs</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

    <span class="nb">print</span> <span class="p">(</span><span class="n">pId</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Once the portfolio is created, check for the portfolio with portfolio id. If the portfolio already exists, you can directly query for it.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_ptf</span> <span class="o">=</span> <span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">get_portfolio</span><span class="p">(</span><span class="n">portfolio_id</span><span class="o">=</span><span class="n">pId</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Create-some-positions">
<h2>Create some positions<a class="headerlink" href="#Create-some-positions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Define-the-positions">
<h3>Define the positions<a class="headerlink" href="#Define-the-positions" title="Permalink to this headline">¶</a></h3>
<p>In this case we will use a list of positions to update the portfolio. As can be seen below any api defaults can be leveraged to avoid specifying all arguments (e.g. the default quantity type is Units).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patch_position</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;clientId&quot;</span><span class="p">:</span> <span class="s2">&quot;514431&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ISIN&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;US5949181045&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Ticker&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;MSFT UN EQUITY&quot;</span><span class="p">}],</span>
                   <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">6288458702.57133</span><span class="p">,</span>
                                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="s2">&quot;MarketValue&quot;</span><span class="p">},</span>
                   <span class="s2">&quot;instrumentMapping&quot;</span><span class="p">:</span> <span class="s2">&quot;Default&quot;</span><span class="p">},</span>
                  <span class="p">{</span><span class="s2">&quot;clientId&quot;</span><span class="p">:</span> <span class="s2">&quot;514453&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;identifiers&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ISIN&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;US0378331005&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Ticker&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;AAPL UN EQUITY&quot;</span><span class="p">}],</span>
                   <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">32440128549.5337</span><span class="p">,</span>
                                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="s2">&quot;MarketValue&quot;</span><span class="p">},</span>
                   <span class="s2">&quot;instrumentMapping&quot;</span><span class="p">:</span> <span class="s2">&quot;Default&quot;</span><span class="p">}]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Add-them-to-the-portfolio">
<h3>Add them to the portfolio<a class="headerlink" href="#Add-them-to-the-portfolio" title="Permalink to this headline">¶</a></h3>
<p>First check if there are positions. This is not necessary but illustrates use of the AsOfDate type which can be compared with a data directly</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">date_to_load_positions</span> <span class="o">=</span> <span class="s2">&quot;2020-12-01&quot;</span> <span class="c1"># or can use the datetime type</span>

<span class="c1"># returns a list of PositionAsOfDate</span>
<span class="n">position_dates_resp</span> <span class="o">=</span> <span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">get_position_dates</span><span class="p">(</span><span class="n">portfolio_id</span><span class="o">=</span><span class="n">pId</span><span class="p">)</span>

<span class="n">position_dates</span> <span class="o">=</span> <span class="n">position_dates_resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># the position dates returns a list of AsOfDates instances allows direct comparison with a date string or datetime</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The portfolio has positions on the date to load: </span><span class="si">{</span><span class="n">date_to_load_positions</span> <span class="ow">in</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;asOfDate&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">position_dates</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">date_to_load_positions</span> <span class="ow">in</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;asOfDate&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">position_dates</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]]:</span>
    <span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">delete_positions</span><span class="p">(</span><span class="n">portfolio_id</span><span class="o">=</span><span class="n">pId</span><span class="p">,</span> <span class="n">as_of_date</span><span class="o">=</span><span class="n">date_to_load_positions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patch</span> <span class="o">=</span> <span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">patch_positions</span><span class="p">(</span><span class="n">as_of_date</span><span class="o">=</span><span class="n">date_to_load_positions</span><span class="p">,</span> <span class="n">portfolio_id</span><span class="o">=</span><span class="n">pId</span><span class="p">,</span> <span class="n">positions_upsert</span><span class="o">=</span><span class="n">patch_position</span><span class="p">,</span>
                              <span class="n">positions_remove</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
</div>
</div>
<p>The patch response makes it easier to identify errors and find the corresponding position records. See the documentation for furhter information</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The patch request response: </span><span class="si">{</span><span class="n">patch</span><span class="o">.</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Check again the dates</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">position_dates</span> <span class="o">=</span> <span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">get_position_dates</span><span class="p">(</span><span class="n">portfolio_id</span><span class="o">=</span><span class="n">pId</span><span class="p">)</span>
<span class="n">position_dates</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Search-for-views">
<h2>Search for views<a class="headerlink" href="#Search-for-views" title="Permalink to this headline">¶</a></h2>
<p>A view can exist in a shared folder or be private so will have a team or owner property but not both.</p>
<p>In order to help find views there is a filter helper that can be used to help build the filter string correctly. Clearly the filter can be constructed without the helper if prefered.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># All views in team Axioma Standard Views where name contains &#39;Coverage&#39;</span>
<span class="n">filters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">od</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;Coverage&quot;</span><span class="p">),</span>
    <span class="s1">&#39;and (&#39;</span><span class="p">,</span>
    <span class="n">od</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;team&quot;</span><span class="p">,</span> <span class="s2">&quot;Axioma Standard Views&quot;</span><span class="p">),</span>
    <span class="s2">&quot;)&quot;</span>
<span class="p">]</span>

<span class="n">filter_</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
<span class="n">definition_names</span> <span class="o">=</span> <span class="n">AnalysisDefinitionAPI</span><span class="o">.</span><span class="n">get_analysis_definitions</span><span class="p">(</span><span class="n">filter_results</span><span class="o">=</span><span class="n">filter_</span><span class="p">)</span>

<span class="c1"># Get top 5 results from the above filter</span>
<span class="n">defs</span> <span class="o">=</span> <span class="n">AnalysisDefinitionAPI</span><span class="o">.</span><span class="n">get_analysis_definitions</span><span class="p">(</span><span class="n">filter_results</span><span class="o">=</span><span class="n">filter_</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">defs</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">analysis_id</span> <span class="o">=</span> <span class="n">defs</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
<br/></pre></div>
</div>
</div>
</div>
<div class="section" id="Run-a-risk-analysis">
<h2>Run a risk analysis<a class="headerlink" href="#Run-a-risk-analysis" title="Permalink to this headline">¶</a></h2>
<p>Risk parameters are set to define the risk analysis task settings.</p>
<p>Any arguments not set will take the defaults of the API (i.e. no value will be passed in the request)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">risk_param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;analysisDate&quot;</span><span class="p">:</span> <span class="n">date_to_load_positions</span><span class="p">,</span>
    <span class="s2">&quot;positionDate&quot;</span><span class="p">:</span> <span class="n">date_to_load_positions</span><span class="p">,</span>
    <span class="s2">&quot;aggregationOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;aggregate&quot;</span><span class="p">:</span> <span class="s2">&quot;OnCompletion&quot;</span><span class="p">,</span>
    <span class="s2">&quot;compute&quot;</span><span class="p">:</span> <span class="n">enums</span><span class="o">.</span><span class="n">ComputeOption</span><span class="o">.</span><span class="n">MissingOnly</span>
  <span class="p">},</span>
    <span class="s2">&quot;analysisDefinition&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">analysis_id</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="Run-a-portfolio-analysis">
<h3>Run a portfolio analysis<a class="headerlink" href="#Run-a-portfolio-analysis" title="Permalink to this headline">¶</a></h3>
<p>The request can be submitted using AnalysesRiskAPI.</p>
<p>The response header will include the request id which can be used for further requests.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ra</span> <span class="o">=</span> <span class="n">AnalysesRiskAPI</span><span class="o">.</span><span class="n">post_portfolio_analyses</span><span class="p">(</span><span class="n">portfolio_id</span><span class="o">=</span><span class="n">pId</span><span class="p">,</span><span class="n">analyses_parameters</span><span class="o">=</span><span class="n">risk_param</span><span class="p">,</span><span class="n">return_response</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">requestId</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ra</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Once the request is submitted, the user can check when the task is completed by requesting for the status by using the request id.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">status</span> <span class="o">=</span> <span class="n">AnalysesRiskAPI</span><span class="o">.</span><span class="n">get_analyses_status</span><span class="p">(</span><span class="n">request_id</span><span class="o">=</span><span class="n">requestId</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The analyses status is a type and has properties to be accessed.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">status</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">status</span><span class="o">.</span><span class="n">content</span>
</pre></div>
</div>
</div>
<div class="section" id="Access-the-logs-and-results">
<h4>Access the logs and results<a class="headerlink" href="#Access-the-logs-and-results" title="Permalink to this headline">¶</a></h4>
<p>The logs can be accessed in json format</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logs</span> <span class="o">=</span> <span class="n">AnalysesRiskAPI</span><span class="o">.</span><span class="n">get_analyses_log</span><span class="p">(</span><span class="n">requestId</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">logs</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
</div>
<p>The results can be accessed in json format</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">AnalysesRiskAPI</span><span class="o">.</span><span class="n">get_analyses</span><span class="p">(</span><span class="n">requestId</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The results can also be fetched in csv format</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">AnalysesRiskAPI</span><span class="o">.</span><span class="n">get_analyses</span><span class="p">(</span><span class="n">requestId</span><span class="p">,</span> <span class="n">as_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">results</span><span class="p">),</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Search-for-Entities">
<h3>Search for Entities<a class="headerlink" href="#Search-for-Entities" title="Permalink to this headline">¶</a></h3>
<p>To look for a particular entity, search using either the type of entity or using the odata filters.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">od</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;PA-MAC-Global-USD&quot;</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">filter_</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>

<span class="n">entities</span> <span class="o">=</span> <span class="n">EntitiesAPI</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="n">typeName1</span><span class="o">=</span><span class="s1">&#39;PerformanceAttributionSettings&#39;</span><span class="p">)</span>

<span class="n">entities</span> <span class="o">=</span> <span class="n">EntitiesAPI</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="n">typeName1</span><span class="o">=</span><span class="s1">&#39;PerformanceAttributionSettings&#39;</span><span class="p">,</span> <span class="n">filter_results</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>

<span class="n">entities</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;items&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Clean-up">
<h2>Clean up<a class="headerlink" href="#Clean-up" title="Permalink to this headline">¶</a></h2>
<p>If required the user can delete the portfolio by passing the portfolio id as param to the request</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">PortfoliosAPI</span><span class="o">.</span><span class="n">delete_portfolio</span><span class="p">(</span><span class="n">pId</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Close the session</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AxiomaSession</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Logging-in-for-Bulk-Session">
<h2>Logging in for Bulk Session<a class="headerlink" href="#Logging-in-for-Bulk-Session" title="Permalink to this headline">¶</a></h2>
<p>In order to create a session for Bulk flows, the user needs to pass BULK in the api type.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AxiomaSession</span><span class="o">.</span><span class="n">use_session</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
    <span class="n">password</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span>
    <span class="n">domain</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;domain&#39;</span><span class="p">],</span>
    <span class="n">api_type</span><span class="o">=</span><span class="s2">&quot;BULK&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>In order to create a session for CEB workflows, the user needs to pass CEB in the api type.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AxiomaSession</span><span class="o">.</span><span class="n">use_session</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
    <span class="n">password</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span>
    <span class="n">domain</span><span class="o">=</span><span class="n">user1</span><span class="p">[</span><span class="s1">&#39;domain&#39;</span><span class="p">],</span>
    <span class="n">api_type</span><span class="o">=</span><span class="n">APIType</span><span class="o">.</span><span class="n">CEB</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../examples2.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="with_sessions.html" class="btn btn-neutral float-right" title="Axiomasessions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024 Axioma by SimCorp.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>